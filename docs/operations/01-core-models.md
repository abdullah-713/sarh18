# ğŸ—ƒï¸ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„ÙƒØ§Ù…Ù„Ø© â€” 32 Ù…ÙˆØ¯ÙŠÙ„

> **Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 3.4.1 | **Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** 2026-02-13
> **Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©:** ÙƒÙ„ Ù…ÙˆØ¯ÙŠÙ„ Ù‡Ù†Ø§ Ù…ÙˆØ«Ù‚ Ø¨Ù€: Ø­Ù‚ÙˆÙ„Ù‡ØŒ Ø¹Ù„Ø§Ù‚Ø§ØªÙ‡ØŒ Ø¯ÙˆØ§Ù„Ù‡ØŒ Ø³ÙƒÙˆØ¨Ø§ØªÙ‡ØŒ ÙˆØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„Ø­Ø°Ù.
> "Ù„Ùˆ Ù…Ø§ ÙÙ‡Ù…Øª Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ Ù…Ù† Ù‡Ø§Ù„ØªÙˆØ«ÙŠÙ‚ â€” Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙÙŠÙ†Ø§ Ù…Ùˆ ÙÙŠÙƒ."

---

## ğŸ“‘ ÙÙ‡Ø±Ø³ Ø³Ø±ÙŠØ¹

| # | Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ | Ø§Ù„ØºØ±Ø¶ | Ø§Ù„Ø®Ø·ÙˆØ±Ø© |
|---|---------|-------|---------|
| 1 | [User](#1-user) | Ø§Ù„Ù…ÙˆØ¸Ù â€” Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ø£Ù…Ù†ÙŠ | ğŸ”´ |
| 2 | [Branch](#2-branch) | Ø§Ù„ÙØ±Ø¹ â€” Ø§Ù„Ø³ÙŠØ§Ø¬ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ ÙˆÙ…Ø±ÙƒØ² Ø§Ù„ØªÙƒÙ„ÙØ© | ğŸ”´ |
| 3 | [Department](#3-department) | Ø§Ù„Ù‚Ø³Ù… | ğŸŸ¡ |
| 4 | [Role](#4-role) | Ø§Ù„Ø¯ÙˆØ± Ø§Ù„ÙˆØ¸ÙŠÙÙŠ | ğŸ”´ |
| 5 | [Permission](#5-permission) | Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© | ğŸ”´ |
| 6 | [AttendanceLog](#6-attendancelog) | Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± â€” Ø§Ù„Ù„Ù‚Ø·Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© | ğŸ”´ |
| 7 | [FinancialReport](#7-financialreport) | Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ | ğŸŸ¡ |
| 8 | [WhistleblowerReport](#8-whistleblowerreport) | Ø¨Ù„Ø§Øº Ø§Ù„Ù…Ø¨Ù„ØºÙŠÙ† â€” Ù…Ø´ÙØ± | ğŸ”´ |
| 9 | [Conversation](#9-conversation) | Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© | ğŸŸ¢ |
| 10 | [Message](#10-message) | Ø§Ù„Ø±Ø³Ø§Ù„Ø© | ğŸŸ¢ |
| 11 | [Circular](#11-circular) | Ø§Ù„ØªØ¹Ù…ÙŠÙ… | ğŸŸ¢ |
| 12 | [CircularAcknowledgment](#12-circularacknowledgment) | Ø¥Ù‚Ø±Ø§Ø± Ø§Ù„ØªØ¹Ù…ÙŠÙ… | ğŸŸ¢ |
| 13 | [PerformanceAlert](#13-performancealert) | ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø£Ø¯Ø§Ø¡ | ğŸŸ¢ |
| 14 | [Badge](#14-badge) | Ø§Ù„Ø´Ø§Ø±Ø© | ğŸŸ¢ |
| 15 | [PointsTransaction](#15-pointstransaction) | Ø­Ø±ÙƒØ© Ø§Ù„Ù†Ù‚Ø§Ø· | ğŸŸ¡ |
| 16 | [TrapInteraction](#16-trapinteraction) | ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…ØµÙŠØ¯Ø© | ğŸ”´ |
| 17 | [Trap](#17-trap) | Ø§Ù„Ù…ØµÙŠØ¯Ø© Ø§Ù„Ù†ÙØ³ÙŠØ© | ğŸ”´ |
| 18 | [LeaveRequest](#18-leaverequest) | Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© | ğŸŸ¡ |
| 19 | [Shift](#19-shift) | Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© | ğŸŸ¡ |
| 20 | [AuditLog](#20-auditlog) | Ø³Ø¬Ù„ Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ | ğŸ”´ |
| 21 | [Holiday](#21-holiday) | Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© Ø§Ù„Ø±Ø³Ù…ÙŠØ© | ğŸŸ¢ |
| 22 | [UserShift](#22-usershift) | ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© â€” ÙƒÙŠØ§Ù† Ù…Ø³ØªÙ‚Ù„ v3.4 | ğŸŸ¡ |
| 23 | [UserBadge](#23-userbadge) | Ù…Ù†Ø­ Ø§Ù„Ø´Ø§Ø±Ø© â€” ÙƒÙŠØ§Ù† Ù…Ø³ØªÙ‚Ù„ v3.4 | ğŸŸ¡ |
| 24 | [UserPermission](#24-userpermission) | ØªØ¬Ø§ÙˆØ² Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© | ğŸ”´ |
| 25 | [Payroll](#25-payroll) | Ù…Ø³ÙŠØ± Ø§Ù„Ø±ÙˆØ§ØªØ¨ | ğŸ”´ |
| 26 | [Setting](#26-setting) | Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â€” Singleton | ğŸ”´ |
| 27 | [ReportFormula](#27-reportformula) | ØµÙŠØºØ© Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ© | ğŸŸ¡ |
| 28 | [ScoreAdjustment](#28-scoreadjustment) | ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø· | ğŸŸ¡ |
| 29 | [AnalyticsSnapshot](#29-analyticssnapshot) | Ù„Ù‚Ø·Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª | ğŸŸ¡ |
| 30 | [LossAlert](#30-lossalert) | ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø®Ø³Ø§Ø¦Ø± | ğŸŸ¢ |
| 31 | [EmployeePattern](#31-employeepattern) | Ù†Ù…Ø· Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø³Ù„ÙˆÙƒÙŠ | ğŸŸ¢ |
| 32 | [AttendanceException](#32-attendanceexception) | Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø¶ÙˆØ± | ğŸŸ¡ |

**Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** ğŸ”´ = Ø­Ø³Ø§Ø³ Ø¬Ø¯Ø§Ù‹ (ØªØ¹Ø¯ÙŠÙ„ Ø®Ø§Ø·Ø¦ ÙŠÙƒØ³Ø± Ø§Ù„Ù†Ø¸Ø§Ù…) | ğŸŸ¡ = Ù…ØªÙˆØ³Ø· | ğŸŸ¢ = Ø¢Ù…Ù† Ù†Ø³Ø¨ÙŠØ§Ù‹

---

---

## 1. User

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/User.php` (623 Ø³Ø·Ø± â€” Ø£ÙƒØ¨Ø± Ù…ÙˆØ¯ÙŠÙ„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…)
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„Ù…ÙˆØ¸Ù/Ø§Ù„Ù…Ø¯ÙŠØ±. ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ù…Ø§Ù„ÙŠØŒ Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª RBACØŒ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø£Ù…Ù†ÙŠØ©ØŒ Ø§Ù„ØªÙ„Ø¹ÙŠØ¨.
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹ â€” Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø®Ø§Ø·Ø¦ ÙŠÙƒØ³Ø± Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

### Ø§Ù„ÙˆØ±Ø§Ø«Ø© ÙˆØ§Ù„Ù€ Traits
```
Authenticatable (Laravel) â†’ implements FilamentUser
Traits: HasFactory, Notifiable, SoftDeletes
```

### ğŸ”¹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ ($fillable)

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ | Ù…Ø«Ø§Ù„ |
|-------|-------|-------|------|
| `employee_id` | `string` | Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ `SARH-YY-XXXX` | `SARH-26-0001` |
| `name_ar` | `string` | Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ | `Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø£Ø­Ù…Ø¯` |
| `name_en` | `string` | Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ | `Abdullah Ahmed` |
| `email` | `string` | Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (ÙØ±ÙŠØ¯) | `a@sarh.online` |
| `password` | `string` | ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Ù…Ø´ÙØ±Ø© bcrypt) | â€” |
| `phone` | `string` | Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ | `0501234567` |
| `national_id` | `string` | Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© (Ù…Ø®ÙÙŠ ÙÙŠ $hidden) | `1234567890` |
| `avatar` | `string` | Ù…Ø³Ø§Ø± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© | `avatars/1.jpg` |
| `gender` | `string` | Ø§Ù„Ø¬Ù†Ø³ | `male` / `female` |
| `date_of_birth` | `date` | ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ | `1990-01-15` |
| `branch_id` | `FKâ†’branches` | Ø§Ù„ÙØ±Ø¹ | `1` |
| `department_id` | `FKâ†’departments` | Ø§Ù„Ù‚Ø³Ù… | `3` |
| `role_id` | `FKâ†’roles` | Ø§Ù„Ø¯ÙˆØ± Ø§Ù„ÙˆØ¸ÙŠÙÙŠ | `2` |
| `direct_manager_id` | `FKâ†’users` | Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¨Ø§Ø´Ø± (self-ref) | `1` |
| `job_title_ar` | `string` | Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ Ø¹Ø±Ø¨ÙŠ | `Ù…Ø­Ø§Ø³Ø¨` |
| `job_title_en` | `string` | Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ | `Accountant` |
| `hire_date` | `date` | ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹ÙŠÙŠÙ† | `2024-01-01` |
| `employment_type` | `string` | Ù†ÙˆØ¹ Ø§Ù„ØªÙˆØ¸ÙŠÙ | `full_time` / `part_time` |
| `status` | `string` | Ø§Ù„Ø­Ø§Ù„Ø© | `active` / `suspended` / `terminated` |
| `basic_salary` | `decimal:2` | Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ | `8000.00` |
| `housing_allowance` | `decimal:2` | Ø¨Ø¯Ù„ Ø§Ù„Ø³ÙƒÙ† | `2000.00` |
| `transport_allowance` | `decimal:2` | Ø¨Ø¯Ù„ Ø§Ù„Ù†Ù‚Ù„ | `500.00` |
| `other_allowances` | `decimal:2` | Ø¨Ø¯Ù„Ø§Øª Ø£Ø®Ø±Ù‰ | `300.00` |
| `working_days_per_month` | `int` | Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù…Ù„/Ø´Ù‡Ø± | `22` |
| `working_hours_per_day` | `int` | Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„/ÙŠÙˆÙ… | `8` |
| `total_points` | `int` | Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø· Ø§Ù„ØªÙ„Ø¹ÙŠØ¨ | `150` |
| `current_streak` | `int` | Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ© | `5` |
| `longest_streak` | `int` | Ø£Ø·ÙˆÙ„ Ø³Ù„Ø³Ù„Ø© Ø­Ø¶ÙˆØ± | `30` |
| `locale` | `string` | Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…ÙØ¶Ù„Ø© | `ar` |
| `timezone` | `string` | Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© | `Asia/Riyadh` |

### âš ï¸ Ø­Ù‚ÙˆÙ„ Ù…Ø­Ù…ÙŠØ© â€” Ù„Ø§ ØªØ¶ÙŠÙÙ‡Ø§ Ù„Ù€ $fillable Ø£Ø¨Ø¯Ø§Ù‹!

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ | Ù„Ù…Ø§Ø°Ø§ Ù…Ø­Ù…ÙŠ |
|-------|-------|-------|-----------|
| `is_super_admin` | `boolean` | Ù…Ø¯ÙŠØ± Ø£Ø¹Ù„Ù‰ | ÙŠØªØºÙŠØ± ÙÙ‚Ø· Ø¨Ù€ `forceFill()` Ø¹Ø¨Ø± `promoteToSuperAdmin()` |
| `security_level` | `int(1-10)` | Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ù…Ù†ÙŠ | ÙŠØªØºÙŠØ± ÙÙ‚Ø· Ø¨Ù€ `forceFill()` Ø¹Ø¨Ø± `setSecurityLevel()` |
| `is_trap_target` | `boolean` | Ù‡Ø¯Ù Ù…ØµÙŠØ¯Ø© | ÙŠØªØºÙŠØ± ÙÙ‚Ø· Ø¨Ù€ `forceFill()` Ø¹Ø¨Ø± `enableTrapMonitoring()` |
| `risk_score` | `int` | Ø¯Ø±Ø¬Ø© Ø§Ù„Ø®Ø·ÙˆØ±Ø© | ÙŠØªØºÙŠØ± Ø¨Ù€ `incrementRiskScore()` â€” ØµÙŠØºØ© Ù„ÙˆØºØ§Ø±ÙŠØªÙ…ÙŠØ© |

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª (Relationships)

| Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ù…Ø±ØªØ¨Ø· | Ø§Ù„ØºØ±Ø¶ |
|---------|-------|-----------------|-------|
| `branch()` | `BelongsTo` | `Branch` | Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø°ÙŠ ÙŠØªØ¨Ø¹ Ù„Ù‡ |
| `department()` | `BelongsTo` | `Department` | Ø§Ù„Ù‚Ø³Ù… |
| `role()` | `BelongsTo` | `Role` | Ø§Ù„Ø¯ÙˆØ± Ø§Ù„ÙˆØ¸ÙŠÙÙŠ |
| `directManager()` | `BelongsTo` | `User` | Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¨Ø§Ø´Ø± |
| `subordinates()` | `HasMany` | `User` | Ø§Ù„Ù…Ø±Ø¤ÙˆØ³ÙˆÙ† |
| `attendanceLogs()` | `HasMany` | `AttendanceLog` | Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± |
| `financialReports()` | `HasMany` | `FinancialReport` | Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© |
| `leaveRequests()` | `HasMany` | `LeaveRequest` | Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© |
| `conversations()` | `BelongsToMany` | `Conversation` | Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª (pivot: `conversation_participants`) |
| `sentMessages()` | `HasMany` | `Message` | Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø© |
| `performanceAlerts()` | `HasMany` | `PerformanceAlert` | ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ |
| `badges()` | `HasMany` | `UserBadge` | Ø§Ù„Ø´Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù…Ù†ÙˆØ­Ø© |
| `awardedBadges()` | `HasMany` | `UserBadge` | Ø§Ù„Ø´Ø§Ø±Ø§Øª Ù…Ø¹ eager load |
| `pointsTransactions()` | `HasMany` | `PointsTransaction` | Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù†Ù‚Ø§Ø· |
| `trapInteractions()` | `HasMany` | `TrapInteraction` | ØªÙØ§Ø¹Ù„Ø§Øª Ø§Ù„Ù…ØµØ§Ø¦Ø¯ |
| `userPermissions()` | `HasMany` | `UserPermission` | ØªØ¬Ø§ÙˆØ²Ø§Øª Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª |
| `directPermissions()` | `BelongsToMany` | `Permission` | Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© |
| `attendanceExceptions()` | `HasMany` | `AttendanceException` | Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± |
| `scoreAdjustments()` | `HasMany` | `ScoreAdjustment` | ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ù†Ù‚Ø§Ø· |
| `shifts()` | `HasMany` | `UserShift` | ØªØ¹ÙŠÙŠÙ†Ø§Øª Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø§Øª |

### ğŸ”¹ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ù…Ø§Ù„ÙŠ (Ø£Ù‡Ù… Ø¬Ø²Ø¡ ÙÙŠ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„)

```
total_salary = basic_salary + housing_allowance + transport_allowance + other_allowances
monthly_working_minutes = working_days_per_month Ã— working_hours_per_day Ã— 60
cost_per_minute = basic_salary Ã· monthly_working_minutes  (4 Ø®Ø§Ù†Ø§Øª Ø¹Ø´Ø±ÙŠØ©)
total_cost_per_minute = total_salary Ã· monthly_working_minutes
daily_rate = basic_salary Ã· working_days_per_month

Ù…Ø«Ø§Ù„ Ø¹Ù…Ù„ÙŠ:
  basic_salary = 8000, days = 22, hours = 8
  monthly_working_minutes = 22 Ã— 8 Ã— 60 = 10,560
  cost_per_minute = 8000 Ã· 10,560 = 0.7576 Ø±ÙŠØ§Ù„/Ø¯Ù‚ÙŠÙ‚Ø©
  Ø®Ø³Ø§Ø±Ø© 15 Ø¯Ù‚ÙŠÙ‚Ø© ØªØ£Ø®ÙŠØ± = 15 Ã— 0.7576 = 11.36 Ø±ÙŠØ§Ù„
```

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `canAccessPanel(Panel $panel): bool`
- **Ø§Ù„ØºØ±Ø¶:** Ø¹Ø²Ù„ Ù‡ÙˆÙŠØ© Ø§Ù„Ø¨ÙˆØ§Ø¨Ø§Øª â€” `/admin` ØªØ­ØªØ§Ø¬ `is_super_admin || security_level >= 4`ØŒ `/app` ØªØ­ØªØ§Ø¬ `security_level < 4`
- **ğŸ“¥ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:** ÙƒØ§Ø¦Ù† Panel Ù…Ù† Filament
- **ğŸ“¤ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:** `true` Ø¥Ø°Ø§ Ù…Ø³Ù…ÙˆØ­ Ø§Ù„Ø¯Ø®ÙˆÙ„
- **âš ï¸ ØªØ­Ø°ÙŠØ±:** Ù„Ùˆ ØºÙŠØ±Øª Ø§Ù„Ù…Ù†Ø·Ù‚ØŒ Ø§Ù„Ù…Ø¯ÙŠØ± Ù…Ù…ÙƒÙ† ÙŠÙÙ‚Ø¯ Ø§Ù„ÙˆØµÙˆÙ„

#### `activeShift(): ?UserShift`
- **Ø§Ù„ØºØ±Ø¶:** ÙŠØ±Ø¬Ø¹ ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© Ø§Ù„Ù†Ø´Ø· (UserShift Ù…Ø¹ `is_current = true`)
- **ğŸ“¤ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:** ÙƒØ§Ø¦Ù† UserShift Ø£Ùˆ null

#### `currentShift(): ?Shift`
- **Ø§Ù„ØºØ±Ø¶:** ÙŠØ±Ø¬Ø¹ Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© Ù†ÙØ³Ù‡Ø§ (Shift object) â€” Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:** `return $this->activeShift()?->shift`
- **ğŸ“Œ Ù…Ù„Ø§Ø­Ø¸Ø©:** ÙŠØ±Ø¬Ø¹ `Shift` Ù…Ø´ `UserShift` â€” Ù‡Ø°Ø§ Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹

#### `hasPermission(string $slug): bool`
- **Ø§Ù„ØºØ±Ø¶:** ÙØ­Øµ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø¨Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ©:
  1. `is_super_admin` â†’ `true` Ø¯Ø§Ø¦Ù…Ø§Ù‹
  2. `UserPermission` Ù†ÙˆØ¹ `revoke` â†’ `false`
  3. `UserPermission` Ù†ÙˆØ¹ `grant` â†’ `true`
  4. `Role->permissions` â†’ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† slug
- **ğŸ“Œ Ù…Ù„Ø§Ø­Ø¸Ø©:** Ø§Ù„ØªØ¬Ø§ÙˆØ²Ø§Øª Ø§Ù„ÙØ±Ø¯ÙŠØ© Ø£Ù‚ÙˆÙ‰ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¯ÙˆØ±

#### `setSecurityLevel(int $level): self`
- **Ø§Ù„ØºØ±Ø¶:** ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ù…Ù†ÙŠ (1-10) Ø¹Ø¨Ø± `forceFill()`
- **âš ï¸ ØªØ­Ø°ÙŠØ±:** Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 10 = ÙˆØ¶Ø¹ Ø§Ù„Ù„Ù‡ â€” ÙŠØªØ¬Ø§ÙˆØ² ÙƒÙ„ Ø´ÙŠ

#### `incrementRiskScore(): int`
- **Ø§Ù„ØºØ±Ø¶:** Ø­Ø³Ø§Ø¨ ÙˆØ­ÙØ¸ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø®Ø·ÙˆØ±Ø© Ø§Ù„Ù„ÙˆØºØ§Ø±ÙŠØªÙ…ÙŠØ©
- **Ø§Ù„ØµÙŠØºØ©:** `risk_score = 10 Ã— (2^n âˆ’ 1)` Ø­ÙŠØ« n = Ø¹Ø¯Ø¯ Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª
- **Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª:** `0-20 = low`, `21-50 = medium`, `51-80 = high`, `81+ = critical`

#### `generateEmployeeId(): string` (static)
- **Ø§Ù„ØºØ±Ø¶:** ÙŠÙÙˆÙ„Ù‘Ø¯ Ø±Ù‚Ù… Ù…ÙˆØ¸Ù ÙØ±ÙŠØ¯ `SARH-YY-XXXX`
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:** Ø¢Ø®Ø± Ø±Ù‚Ù… + 1ØŒ Ù…Ø¹ padding Ù„Ø£Ø±Ø¨Ø¹ Ø®Ø§Ù†Ø§Øª
- **ÙŠÙØ³ØªØ¯Ø¹Ù‰ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹** ÙÙŠ `booted()` Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª (Scopes)

| Ø§Ù„Ù†Ø·Ø§Ù‚ | Ø§Ù„ÙÙ„ØªØ± |
|--------|-------|
| `scopeActive` | `status = 'active'` |
| `scopeInBranch($id)` | `branch_id = $id` |
| `scopeInDepartment($id)` | `department_id = $id` |
| `scopeWithSecurityLevel($min)` | `security_level >= $min` |

### ğŸŸ¢ Ù„Ùˆ Ø¨Ø¯Ù†Ø§ Ù†Ø¶ÙŠÙ Ø®Ø§ØµÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…ÙˆØ¸Ù
1. Ø£Ø¶Ù Ø¹Ù…ÙˆØ¯ ÙÙŠ migration Ø¬Ø¯ÙŠØ¯: `php artisan make:migration add_xxx_to_users_table`
2. Ø£Ø¶Ù Ø§Ù„Ø­Ù‚Ù„ ÙÙŠ `$fillable` (Ø£Ùˆ `$hidden` Ù„Ùˆ Ø­Ø³Ø§Ø³)
3. Ø£Ø¶Ù cast Ù„Ùˆ Ù„Ø§Ø²Ù… ÙÙŠ `$casts`
4. Ø£Ø¶Ù Ø§Ù„Ø­Ù‚Ù„ ÙÙŠ `UserResource` â†’ `form()` Ùˆ `table()`
5. Ø´ØºÙ‘Ù„ `php artisan migrate`

### ğŸ”´ Ù„Ùˆ Ø¨Ø¯Ù†Ø§ Ù†Ø­Ø°Ù User
**Ù„Ø§ ØªØ­Ø°ÙÙ‡!** Ø§Ø³ØªØ®Ø¯Ù… Soft Delete (`status = 'terminated'`). Ù„Ùˆ Ø­Ø°ÙØªÙ‡:
- âŒ ÙƒÙ„ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± ØªÙÙ‚Ø¯ Ø§Ù„Ù…Ø±Ø¬Ø¹
- âŒ ÙƒÙ„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© ØªÙ†ÙƒØ³Ø±
- âŒ ÙƒÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª ØªÙÙ‚Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ
- âŒ ÙƒÙ„ Ø§Ù„Ø´Ø§Ø±Ø§Øª ÙˆØ§Ù„Ù†Ù‚Ø§Ø· ØªØ¶ÙŠØ¹

---

---

## 2. Branch

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Branch.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„ÙØ±Ø¹ â€” ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ø³ÙŠØ§Ø¬ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (Haversine)ØŒ Ù…Ø±ÙƒØ² Ø§Ù„ØªÙƒÙ„ÙØ©ØŒ Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø±ÙˆØ§ØªØ¨
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ© â€” ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ÙŠØ£Ø«Ø± Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†

### ğŸ”¹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ ($fillable)

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ | Ù…Ø«Ø§Ù„ |
|-------|-------|-------|------|
| `name_ar` | `string` | Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹ Ø¹Ø±Ø¨ÙŠ | `Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ` |
| `name_en` | `string` | Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ | `Main Branch` |
| `code` | `string` | Ø±Ù…Ø² Ø§Ù„ÙØ±Ø¹ | `BR-001` |
| `address_ar` | `string` | Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¹Ø±Ø¨ÙŠ | â€” |
| `address_en` | `string` | Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ | â€” |
| `city_ar` | `string` | Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø¹Ø±Ø¨ÙŠ | `Ø¬Ø¯Ø©` |
| `city_en` | `string` | Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ | `Jeddah` |
| `phone` | `string` | Ù‡Ø§ØªÙ Ø§Ù„ÙØ±Ø¹ | â€” |
| `email` | `string` | Ø¨Ø±ÙŠØ¯ Ø§Ù„ÙØ±Ø¹ | â€” |
| `latitude` | `decimal:7` | Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ GPS | `21.4858003` |
| `longitude` | `decimal:7` | Ø®Ø· Ø§Ù„Ø·ÙˆÙ„ GPS | `39.1925048` |
| `geofence_radius` | `int` | Ù†ØµÙ Ù‚Ø·Ø± Ø§Ù„Ø³ÙŠØ§Ø¬ (Ø£Ù…ØªØ§Ø±) | `17` |
| `default_shift_start` | `time` | Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙˆØ±Ø¯ÙŠØ© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© | `08:00` |
| `default_shift_end` | `time` | Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙˆØ±Ø¯ÙŠØ© | `16:00` |
| `grace_period_minutes` | `int` | ÙØªØ±Ø© Ø§Ù„Ø³Ù…Ø§Ø­ (Ø¯Ù‚Ø§Ø¦Ù‚) | `5` |
| `is_active` | `boolean` | ÙØ¹Ø§Ù„ØŸ | `true` |
| `monthly_salary_budget` | `decimal:2` | Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠØ© | `250000.00` |
| `monthly_delay_losses` | `decimal:2` | Ø®Ø³Ø§Ø¦Ø± Ø§Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„Ø´Ù‡Ø±ÙŠØ© | `5200.00` |
| `cost_center_code` | `string` | Ø±Ù…Ø² Ù…Ø±ÙƒØ² Ø§Ù„ØªÙƒÙ„ÙØ© | `CC-001` |
| `annual_budget` | `decimal:2` | Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø³Ù†ÙˆÙŠØ© | `3000000.00` |
| `target_attendance_rate` | `decimal:2` | Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ© | `95.00` |
| `max_acceptable_loss_percent` | `decimal:2` | Ø£Ù‚ØµÙ‰ Ù†Ø³Ø¨Ø© Ø®Ø³Ø§Ø¦Ø± Ù…Ù‚Ø¨ÙˆÙ„Ø© | `5.00` |
| `vpm_target` | `decimal:2` | Ù‡Ø¯Ù Ø§Ù„Ù‚ÙŠÙ…Ø© Ù„ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© | `0.80` |

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª

| Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ | Ø§Ù„ØºØ±Ø¶ |
|---------|-------|---------|-------|
| `users()` | `HasMany` | `User` | Ù…ÙˆØ¸ÙÙˆ Ø§Ù„ÙØ±Ø¹ |
| `departments()` | `HasMany` | `Department` | Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙØ±Ø¹ |
| `attendanceLogs()` | `HasMany` | `AttendanceLog` | Ø³Ø¬Ù„Ø§Øª Ø­Ø¶ÙˆØ± Ø§Ù„ÙØ±Ø¹ |
| `financialReports()` | `HasMany` | `FinancialReport` | ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ù…Ø§Ù„ÙŠØ© |
| `holidays()` | `HasMany` | `Holiday` | Ø¥Ø¬Ø§Ø²Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„ÙØ±Ø¹ |
| `payrolls()` | `HasMany` | `Payroll` | Ù…Ø³ÙŠØ±Ø§Øª Ø±ÙˆØ§ØªØ¨ Ø§Ù„ÙØ±Ø¹ |
| `analyticsSnapshots()` | `HasMany` | `AnalyticsSnapshot` | Ù„Ù‚Ø·Ø§Øª ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„ÙØ±Ø¹ |
| `lossAlerts()` | `HasMany` | `LossAlert` | ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø®Ø³Ø§Ø¦Ø± Ø§Ù„ÙØ±Ø¹ |

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `distanceTo(float $lat, float $lng): float`
- **Ø§Ù„ØºØ±Ø¶:** Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„ÙØ±Ø¹ ÙˆÙ†Ù‚Ø·Ø© GPS Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… **ØµÙŠØºØ© Haversine**
- **ğŸ“¤ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:** Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨Ø§Ù„Ø£Ù…ØªØ§Ø±
- **Ø§Ù„ØµÙŠØºØ©:** `2 Ã— R Ã— asin(âˆš(sinÂ²(Î”lat/2) + cos(lat1) Ã— cos(lat2) Ã— sinÂ²(Î”lng/2)))` Ø­ÙŠØ« R = 6371000 Ù…ØªØ±

#### `isWithinGeofence(float $lat, float $lng): bool`
- **Ø§Ù„ØºØ±Ø¶:** Ù‡Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ø³ÙŠØ§Ø¬ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØŸ
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:** `$this->distanceTo($lat, $lng) <= $this->geofence_radius`
- **ğŸ“Œ Ø§Ø³ØªØ®Ø¯Ø§Ù…:** AttendanceService ÙŠØ³ØªØ¯Ø¹ÙŠÙ‡Ø§ Ø¹Ù†Ø¯ ÙƒÙ„ check-in

#### `recalculateSalaryBudget(): void`
- **Ø§Ù„ØºØ±Ø¶:** Ø¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø±ÙˆØ§ØªØ¨ Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹ Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†
- **ğŸ“¦ Ø§Ù„Ø£Ø«Ø±:** ÙŠØ­Ø¯Ù‘Ø« `monthly_salary_budget` ÙˆÙŠØ­ÙØ¸

### ğŸ”¹ Ù„Ùˆ Ø¨Ø¯Ù†Ø§ Ù†ØºÙŠØ± Ù†ØµÙ Ù‚Ø·Ø± Ø§Ù„Ø³ÙŠØ§Ø¬
1. Ø§ÙØªØ­ `BranchResource` Ø£Ùˆ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
2. Ø¹Ø¯Ù‘Ù„ `geofence_radius` (Ø¨Ø§Ù„Ø£Ù…ØªØ§Ø±)
3. **Ø£Ùˆ** ØºÙŠÙ‘Ø± `default_geofence_radius` ÙÙŠ `Setting::logic_settings`
4. **âš ï¸ ØªØ£ÙƒØ¯:** Ù„Ùˆ ØµØºØ±Øª Ø§Ù„Ù†ØµÙ â†’ Ù…ÙˆØ¸ÙÙŠÙ† Ù…Ù…ÙƒÙ† ÙŠÙØ´Ù„ÙˆÙ† ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±

---

---

## 3. Department

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Department.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ â€” ÙŠØªØ¨Ø¹ Ù„ÙØ±Ø¹ØŒ ÙˆÙŠØ¯Ø¹Ù… Ø§Ù„Ù‡ÙŠÙƒÙ„ÙŠØ© Ø§Ù„Ø´Ø¬Ø±ÙŠØ© (parent/children)
ğŸŸ¡ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…ØªÙˆØ³Ø·Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ |
|-------|-------|-------|
| `name_ar` | `string` | Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø¹Ø±Ø¨ÙŠ |
| `name_en` | `string` | Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ |
| `code` | `string` | Ø±Ù…Ø² Ø§Ù„Ù‚Ø³Ù… |
| `branch_id` | `FKâ†’branches` | Ø§Ù„ÙØ±Ø¹ Ø§Ù„ØªØ§Ø¨Ø¹ Ù„Ù‡ |
| `parent_id` | `FKâ†’departments` | Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£Ø¨ (Ù‡ÙŠÙƒÙ„ÙŠØ© Ø´Ø¬Ø±ÙŠØ©) |
| `head_id` | `FKâ†’users` | Ø±Ø¦ÙŠØ³ Ø§Ù„Ù‚Ø³Ù… |
| `description_ar` | `string` | ÙˆØµÙ Ø¹Ø±Ø¨ÙŠ |
| `description_en` | `string` | ÙˆØµÙ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ |
| `is_active` | `boolean` | ÙØ¹Ø§Ù„ØŸ |

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª

| Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ |
|---------|-------|---------|
| `branch()` | `BelongsTo` | `Branch` |
| `parent()` | `BelongsTo` | `Department` (self-ref) |
| `children()` | `HasMany` | `Department` (self-ref) |
| `head()` | `BelongsTo` | `User` |
| `users()` | `HasMany` | `User` |
| `financialReports()` | `HasMany` | `FinancialReport` |

### ğŸ”¹ Ù„Ùˆ Ø¨Ø¯Ù†Ø§ Ù†Ø­Ø°Ù Ù‚Ø³Ù…
- âŒ Ù„Ø§Ø²Ù… Ù†Ù†Ù‚Ù„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø£ÙˆÙ„Ø§Ù‹ (`users` â†’ Ù‚Ø³Ù… Ø¢Ø®Ø±)
- âŒ Ù„Ø§Ø²Ù… Ù†ØªØ£ÙƒØ¯ Ù…Ø§ ÙÙŠ Ø£Ù‚Ø³Ø§Ù… ÙØ±Ø¹ÙŠØ© (`children`)

---

---

## 4. Role

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Role.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„Ø¯ÙˆØ± Ø§Ù„ÙˆØ¸ÙŠÙÙŠ â€” ÙŠØ­ØªÙˆÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© ØµÙ„Ø§Ø­ÙŠØ§Øª
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ© â€” Ø­Ø°Ù Ø¯ÙˆØ± ÙŠÙÙ‚Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ØµÙ„Ø§Ø­ÙŠØ§ØªÙ‡Ù…

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ |
|-------|-------|-------|
| `name_ar` | `string` | Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ± Ø¹Ø±Ø¨ÙŠ |
| `name_en` | `string` | Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ± Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ |
| `slug` | `string` | Ø§Ù„Ù…Ø¹Ø±Ù‘Ù Ø§Ù„ÙØ±ÙŠØ¯ (`admin`, `hr`, `employee`) |
| `level` | `int` | Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© |
| `description_ar` | `string` | ÙˆØµÙ Ø¹Ø±Ø¨ÙŠ |
| `description_en` | `string` | ÙˆØµÙ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ |
| `is_system` | `boolean` | Ø¯ÙˆØ± Ù†Ø¸Ø§Ù…ÙŠ (Ù„Ø§ ÙŠÙØ­Ø°Ù) |

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª

| Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ |
|---------|-------|---------|
| `permissions()` | `BelongsToMany` | `Permission` (pivot: `role_permission`) |
| `users()` | `HasMany` | `User` |

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

| Ø§Ù„Ø¯Ø§Ù„Ø© | Ø§Ù„ØºØ±Ø¶ |
|--------|-------|
| `grantPermission(Permission)` | Ø¥Ø¶Ø§ÙØ© ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„Ø¯ÙˆØ± |
| `revokePermission(Permission)` | Ø³Ø­Ø¨ ØµÙ„Ø§Ø­ÙŠØ© Ù…Ù† Ø§Ù„Ø¯ÙˆØ± |
| `hasPermission(string $slug)` | ÙØ­Øµ ÙˆØ¬ÙˆØ¯ ØµÙ„Ø§Ø­ÙŠØ© |

---

---

## 5. Permission

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Permission.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙØ±Ø¯ÙŠØ© â€” 42+ ØµÙ„Ø§Ø­ÙŠØ© Ù…Ù‚Ø³Ù…Ø© Ø¨Ù…Ø¬Ù…ÙˆØ¹Ø§Øª
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ© â€” ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙŠØ£Ø«Ø± Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ |
|-------|-------|-------|
| `name_ar` | `string` | Ø§Ø³Ù… Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø¹Ø±Ø¨ÙŠ |
| `name_en` | `string` | Ø§Ø³Ù… Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ |
| `slug` | `string` | Ø§Ù„Ù…Ø¹Ø±Ù‘Ù Ø§Ù„ÙØ±ÙŠØ¯ (Ù…Ø«Ù„ `attendance.view`) |
| `group` | `string` | Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© (Ù…Ø«Ù„ `attendance`, `financial`, `admin`) |
| `description_en` | `string` | ÙˆØµÙ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ |

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª

| Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ |
|---------|-------|---------|
| `roles()` | `BelongsToMany` | `Role` |

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeInGroup($group)` â€” ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©

---

---

## 6. AttendanceLog

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/AttendanceLog.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ â€” ÙŠØ­ØªÙˆÙŠ **Ø§Ù„Ù„Ù‚Ø·Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©** (Ø£Ù‡Ù… Ù…ÙÙ‡ÙˆÙ… ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…)
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹ â€” Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù‡Ùˆ Ø£Ø³Ø§Ø³ ÙƒÙ„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ |
|-------|-------|-------|
| `user_id` | `FKâ†’users` | Ø§Ù„Ù…ÙˆØ¸Ù |
| `branch_id` | `FKâ†’branches` | Ø§Ù„ÙØ±Ø¹ |
| `attendance_date` | `date` | ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¶ÙˆØ± |
| `check_in_at` | `datetime` | ÙˆÙ‚Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ |
| `check_in_latitude` | `decimal` | Ø®Ø· Ø¹Ø±Ø¶ GPS Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ |
| `check_in_longitude` | `decimal` | Ø®Ø· Ø·ÙˆÙ„ GPS Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ |
| `check_in_distance_meters` | `decimal` | Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„ÙØ±Ø¹ Ø¨Ø§Ù„Ø£Ù…ØªØ§Ø± |
| `check_in_within_geofence` | `boolean` | Ø¯Ø§Ø®Ù„ Ø§Ù„Ø³ÙŠØ§Ø¬ØŸ |
| `check_in_ip` | `string` | Ø¹Ù†ÙˆØ§Ù† IP |
| `check_in_device` | `string` | Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ |
| `check_out_at` | `datetime` | ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØµØ±Ø§Ù |
| `check_out_latitude` | `decimal` | Ø®Ø· Ø¹Ø±Ø¶ GPS Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬ |
| `check_out_longitude` | `decimal` | Ø®Ø· Ø·ÙˆÙ„ GPS Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬ |
| `check_out_distance_meters` | `decimal` | Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬ |
| `check_out_within_geofence` | `boolean` | Ø¯Ø§Ø®Ù„ Ø§Ù„Ø³ÙŠØ§Ø¬ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ |
| `status` | `string` | Ø§Ù„Ø­Ø§Ù„Ø©: `present` / `late` / `absent` / `leave` / `holiday` |
| `delay_minutes` | `int` | Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `early_leave_minutes` | `int` | Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ù…Ø¨ÙƒØ±Ø© |
| `overtime_minutes` | `int` | Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ |
| `worked_minutes` | `int` | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„Ø¹Ù…Ù„ |
| `cost_per_minute` | `decimal:4` | **Ø§Ù„Ù„Ù‚Ø·Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©** â€” ØªÙƒÙ„ÙØ© Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ‚Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„ |
| `delay_cost` | `decimal:2` | ØªÙƒÙ„ÙØ© Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `early_leave_cost` | `decimal:2` | ØªÙƒÙ„ÙØ© Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ù…Ø¨ÙƒØ±Ø© |
| `overtime_value` | `decimal:2` | Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ (1.5Ã—) |
| `notes` | `text` | Ù…Ù„Ø§Ø­Ø¸Ø§Øª |
| `approved_by` | `FKâ†’users` | Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ |
| `approved_at` | `datetime` | ÙˆÙ‚Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ |
| `is_manual_entry` | `boolean` | Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠØŸ |

### ğŸ”¹ Ù†Ù…Ø· Ø§Ù„Ù„Ù‚Ø·Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© â€” Ù„Ù…Ø§Ø°Ø§ `cost_per_minute` Ù…ÙˆØ¬ÙˆØ¯ Ù‡Ù†Ø§ØŸ

```
Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ù„Ùˆ ØºÙŠØ±Ù†Ø§ Ø±Ø§ØªØ¨ Ù…ÙˆØ¸Ù Ù…Ù† 8000 Ø¥Ù„Ù‰ 10000
         Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø³ØªØ­Ø³Ø¨ Ø¨Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ â†’ Ø®Ø·Ø£!

Ø§Ù„Ø­Ù„:    Ø¹Ù†Ø¯ ÙƒÙ„ check-in Ù†Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ù…Ù† cost_per_minute ÙˆÙ‚Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„
         Ù‡ÙƒØ°Ø§ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ØªØ¨Ù‚Ù‰ ØµØ­ÙŠØ­Ø© Ø­ØªÙ‰ Ù„Ùˆ ØªØºÙŠØ± Ø§Ù„Ø±Ø§ØªØ¨

âš ï¸ Ù„Ø§ ØªØ­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø£Ø¨Ø¯Ø§Ù‹ â€” Ø¨Ø¯ÙˆÙ†Ù‡ ÙƒÙ„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© ØªÙ†ÙƒØ³Ø±
```

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `calculateFinancials(): self`
- **Ø§Ù„ØºØ±Ø¶:** ÙŠÙ„ØªÙ‚Ø· `cost_per_minute` ÙˆÙŠØ­Ø³Ø¨ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:**
  1. `cost_per_minute = user->cost_per_minute` (snapshot!)
  2. `delay_cost = delay_minutes Ã— cost_per_minute`
  3. `early_leave_cost = early_leave_minutes Ã— cost_per_minute`
  4. `overtime_value = overtime_minutes Ã— cost_per_minute Ã— 1.5`

#### `evaluateAttendance(string $shiftStart, int $gracePeriod = 5): self`
- **Ø§Ù„ØºØ±Ø¶:** ÙŠØ­Ø³Ø¨ Ø§Ù„ØªØ£Ø®ÙŠØ± ÙˆØ§Ù„Ø­Ø§Ù„Ø© Ù…Ù† ÙˆÙ‚Øª Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø©
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:**
  1. ÙŠØ­Ø³Ø¨ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† `check_in_at` Ùˆ `$shiftStart`
  2. Ù„Ùˆ Ø§Ù„ÙØ±Ù‚ > `$gracePeriod` â†’ `status = 'late'`ØŒ `delay_minutes = Ø§Ù„ÙØ±Ù‚`
  3. Ù„Ùˆ Ø§Ù„ÙØ±Ù‚ <= `$gracePeriod` â†’ `status = 'present'`

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª

| Ø§Ù„Ù†Ø·Ø§Ù‚ | Ø§Ù„ÙÙ„ØªØ± |
|--------|-------|
| `scopeForDate($date)` | `attendance_date = $date` |
| `scopeLate` | `status = 'late'` |
| `scopeAbsent` | `status = 'absent'` |
| `scopeWithDelayCost` | `delay_cost > 0` |
| `scopeTotalDelayCost` | `sum('delay_cost')` |

---

---

## 7. FinancialReport

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/FinancialReport.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¬Ù…Ù‘Ø¹ â€” ÙŠÙÙˆÙ„Ù‘Ø¯ Ù…Ù† Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± Ù„ÙØªØ±Ø© Ù…Ø¹ÙŠÙ†Ø©
ğŸŸ¡ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…ØªÙˆØ³Ø·Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ |
|-------|-------|-------|
| `report_code` | `string` | Ø±Ù…Ø² ÙØ±ÙŠØ¯ `FIN-XXX-YYYYMMDDHHmmss-NNN` |
| `scope` | `string` | Ù†Ø·Ø§Ù‚: `employee` / `branch` / `department` / `company` |
| `period_type` | `string` | Ù†ÙˆØ¹ Ø§Ù„ÙØªØ±Ø©: `daily` / `weekly` / `monthly` / `custom` |
| `period_start` | `date` | Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙØªØ±Ø© |
| `period_end` | `date` | Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙØªØ±Ø© |
| `user_id` | `FK` | Ø§Ù„Ù…ÙˆØ¸Ù (Ù„Ùˆ scope = employee) |
| `branch_id` | `FK` | Ø§Ù„ÙØ±Ø¹ |
| `department_id` | `FK` | Ø§Ù„Ù‚Ø³Ù… |
| `total_working_days` | `int` | Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù…Ù„ |
| `total_present_days` | `int` | Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± |
| `total_late_days` | `int` | Ø£ÙŠØ§Ù… Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `total_absent_days` | `int` | Ø£ÙŠØ§Ù… Ø§Ù„ØºÙŠØ§Ø¨ |
| `total_leave_days` | `int` | Ø£ÙŠØ§Ù… Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© |
| `total_delay_minutes` | `int` | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `total_salary_budget` | `decimal:2` | Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø±ÙˆØ§ØªØ¨ |
| `total_delay_cost` | `decimal:2` | Ø¥Ø¬Ù…Ø§Ù„ÙŠ ØªÙƒÙ„ÙØ© Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `net_financial_impact` | `decimal:2` | Ø§Ù„Ø£Ø«Ø± Ø§Ù„Ù…Ø§Ù„ÙŠ Ø§Ù„ØµØ§ÙÙŠ |
| `loss_percentage` | `decimal:2` | Ù†Ø³Ø¨Ø© Ø§Ù„Ø®Ø³Ø§Ø±Ø© |
| `meta` | `array(JSON)` | Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© |

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `generateForEmployee(User $user, string $start, string $end): self` (static)
- **Ø§Ù„ØºØ±Ø¶:** ÙŠÙØ¨Ù†ÙŠ ØªÙ‚Ø±ÙŠØ± Ù…Ø§Ù„ÙŠ ÙƒØ§Ù…Ù„ Ù„Ù…ÙˆØ¸Ù ÙˆØ§Ø­Ø¯ Ù…Ù† Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:**
  1. ÙŠØ¬Ù„Ø¨ ÙƒÙ„ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± Ù„Ù„ÙØªØ±Ø©
  2. ÙŠØ­Ø³Ø¨ Ø§Ù„Ø£ÙŠØ§Ù… (Ø­Ø¶ÙˆØ±/ØºÙŠØ§Ø¨/ØªØ£Ø®ÙŠØ±/Ø¥Ø¬Ø§Ø²Ø©)
  3. ÙŠØ¬Ù…Ø¹ Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚ ÙˆØ§Ù„ØªÙƒØ§Ù„ÙŠÙ
  4. ÙŠØ­Ø³Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„Ø®Ø³Ø§Ø±Ø© = `(delay_cost + early_cost) / salary_budget Ã— 100`
  5. ÙŠØ­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ±

---

---

## 8. WhistleblowerReport

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/WhistleblowerReport.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ù…Ø¨Ù„ØºÙŠÙ† (Whistleblower) â€” **Ù…Ø´ÙØ±Ø©** Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ© â€” Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø³Ø© ÙˆÙ…Ø´ÙØ±Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ |
|-------|-------|-------|
| `ticket_number` | `string` | Ø±Ù‚Ù… Ø§Ù„ØªØ°ÙƒØ±Ø© `WB-XXXXXXXX-yymmdd` |
| `encrypted_content` | `text` | Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø´ÙØ± Ø¨Ù€ `encrypt()` |
| `category` | `string` | Ø§Ù„ØªØµÙ†ÙŠÙ (`fraud`, `harassment`, `safety`, ...) |
| `severity` | `string` | Ø§Ù„Ø®Ø·ÙˆØ±Ø© (`low`, `medium`, `high`, `critical`) |
| `status` | `string` | Ø§Ù„Ø­Ø§Ù„Ø© (`new`, `under_review`, `resolved`, ...) |
| `anonymous_token` | `string` | Ø±Ù…Ø² Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„ (SHA-256) |
| `encrypted_evidence_paths` | `text` | Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ù„Ø© Ø§Ù„Ù…Ø´ÙØ±Ø© |
| `assigned_to` | `FKâ†’users` | Ø§Ù„Ù…Ø­Ù‚Ù‚ Ø§Ù„Ù…Ø¹ÙŠÙ‘Ù† |
| `investigator_notes` | `text` | Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø­Ù‚Ù‚ |
| `resolved_at` | `datetime` | ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ù„ |
| `resolution_outcome` | `string` | Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù‚ÙŠÙ‚ |

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

| Ø§Ù„Ø¯Ø§Ù„Ø© | Ø§Ù„ØºØ±Ø¶ |
|--------|-------|
| `setContent(string)` | ÙŠØ´ÙØ± ÙˆÙŠØ­ÙØ¸ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ù€ Laravel `encrypt()` |
| `getContent()` | ÙŠÙÙƒ ØªØ´ÙÙŠØ± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ù€ `decrypt()` |
| `generateTicketNumber()` | static: `WB-XXXXXXXX-yymmdd` |
| `generateAnonymousToken()` | static: SHA-256 token Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„Ø© |

### ğŸ” Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ù…Ù†ÙŠØ©
- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ **Ù„Ø§ ÙŠÙÙ‚Ø±Ø£** Ø¥Ù„Ø§ Ø¨Ù€ `getContent()`
- ÙÙ‚Ø· Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 10 ÙŠÙ‚Ø¯Ø± ÙŠÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
- Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„ ÙŠØ³Ù…Ø­ Ù„Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø¯ÙˆÙ† ÙƒØ´Ù Ù‡ÙˆÙŠØªÙ‡

---

---

## 9. Conversation

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Conversation.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø¨ÙŠÙ† Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
ğŸŸ¢ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…Ù†Ø®ÙØ¶Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`title`, `type` (direct/group), `created_by` (FKâ†’users), `is_archived` (boolean)

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `creator()` â†’ `BelongsTo` User
- `participants()` â†’ `BelongsToMany` User (pivot: `conversation_participants` Ù…Ø¹ `is_muted`, `last_read_at`)
- `messages()` â†’ `HasMany` Message
- `latestMessage()` â†’ `HasOne` Message (latestOfMany)

---

---

## 10. Message

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Message.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¯Ø§Ø®Ù„ Ù…Ø­Ø§Ø¯Ø«Ø©
ğŸŸ¢ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…Ù†Ø®ÙØ¶Ø©
**Traits:** SoftDeletes

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`conversation_id` (FK), `sender_id` (FKâ†’users), `body`, `type` (text/image/file), `attachment_path`, `is_read`, `read_at`

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `conversation()` â†’ `BelongsTo` Conversation
- `sender()` â†’ `BelongsTo` User
- **Scope:** `scopeUnread` â†’ `is_read = false`

---

---

## 11. Circular

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Circular.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„ØªØ¹Ù…ÙŠÙ…Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© â€” ÙŠÙ…ÙƒÙ† ØªÙˆØ¬ÙŠÙ‡Ù‡Ø§ Ù„ÙØ±Ø¹/Ù‚Ø³Ù…/Ø¯ÙˆØ± Ù…Ø­Ø¯Ø¯
ğŸŸ¢ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…Ù†Ø®ÙØ¶Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`title_ar`, `title_en`, `body_ar`, `body_en`, `priority`, `target_scope`, `target_branch_id` (FK), `target_department_id` (FK), `target_role_id` (FK), `created_by` (FK), `requires_acknowledgment`, `published_at`, `expires_at`

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `creator()` â†’ `BelongsTo` User
- `targetBranch()` â†’ `BelongsTo` Branch
- `targetDepartment()` â†’ `BelongsTo` Department
- `targetRole()` â†’ `BelongsTo` Role
- `acknowledgments()` â†’ `HasMany` CircularAcknowledgment

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopePublished` â†’ published_at IS NOT NULL AND <= now()
- `scopeActive` â†’ Published AND not expired

---

---

## 12. CircularAcknowledgment

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/CircularAcknowledgment.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø¥Ù‚Ø±Ø§Ø± Ø§Ù„Ù…ÙˆØ¸Ù Ø¨Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªØ¹Ù…ÙŠÙ…
ğŸŸ¢ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…Ù†Ø®ÙØ¶Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`circular_id` (FK), `user_id` (FK), `acknowledged_at` (datetime)

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `circular()` â†’ `BelongsTo` Circular
- `user()` â†’ `BelongsTo` User

---

---

## 13. PerformanceAlert

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/PerformanceAlert.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ù„Ù„Ù…ÙˆØ¸Ù (ØªØ£Ø®ÙŠØ± Ù…ØªÙƒØ±Ø±ØŒ ØºÙŠØ§Ø¨ Ù…Ø¶Ø·Ø±Ø¯ØŒ Ø¥Ù„Ø®)
ğŸŸ¢ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…Ù†Ø®ÙØ¶Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`user_id` (FK), `alert_type`, `severity` (info/warning/critical), `title_ar`, `title_en`, `message_ar`, `message_en`, `trigger_data` (JSON array), `is_read`, `read_at`, `dismissed_by` (FK)

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `user()` â†’ `BelongsTo` User
- `dismissedByUser()` â†’ `BelongsTo` User

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeUnread`, `scopeCritical`

---

---

## 14. Badge

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Badge.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø´Ø§Ø±Ø§Øª (Ø§Ù„Ø´Ø§Ø±Ø© Ù†ÙØ³Ù‡Ø§ â€” Ù„ÙŠØ³ Ø§Ù„Ù…Ù†Ø­)
ğŸŸ¢ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…Ù†Ø®ÙØ¶Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`name_ar`, `name_en`, `slug`, `description_ar`, `description_en`, `icon`, `color`, `category`, `points_reward` (int), `criteria` (JSON), `is_active`

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `awards()` â†’ `HasMany` UserBadge

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeActive`, `scopeByCategory($cat)`

---

---

## 15. PointsTransaction

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/PointsTransaction.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù†Ù‚Ø§Ø· â€” ÙƒÙ„ Ø¥Ø¶Ø§ÙØ© Ø£Ùˆ Ø®ØµÙ… Ù†Ù‚Ø§Ø· Ù…Ø³Ø¬Ù„Ø© Ù‡Ù†Ø§
ğŸŸ¡ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…ØªÙˆØ³Ø·Ø© â€” Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„ÙŠÙ‡Ø§

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`user_id` (FK), `type` (earned/deducted), `amount` (int), `balance_after` (int), `source` (string), `sourceable_type`, `sourceable_id` (polymorphic), `description`

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `user()` â†’ `BelongsTo` User
- `sourceable()` â†’ `MorphTo` (ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† UserBadge, AttendanceLog, Ø£Ùˆ Ø£ÙŠ Ù…ÙˆØ¯ÙŠÙ„)

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeEarned`, `scopeDeducted`

### ğŸ“Œ Ù…Ù„Ø§Ø­Ø¸Ø©
- `sourceable()` = Polymorphic â€” Ø£ÙŠ Ù…ÙˆØ¯ÙŠÙ„ ÙŠÙ…ÙƒÙ†Ù‡ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…ØµØ¯Ø± Ø§Ù„Ù†Ù‚Ø§Ø·
- `balance_after` ÙŠØ³Ø¬Ù„ Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ø­Ø³Ø§Ø¨ ØªØ±Ø§ÙƒÙ…ÙŠ)

---

---

## 16. TrapInteraction

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/TrapInteraction.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** ØªØ³Ø¬ÙŠÙ„ ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…ÙˆØ¸Ù Ù…Ø¹ Ù…ØµÙŠØ¯Ø© Ù†ÙØ³ÙŠØ©
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ© â€” Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ø±ÙŠØ©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`user_id` (FK), `trap_id` (FK), `trap_type`, `trap_element`, `page_url`, `ip_address`, `user_agent`, `interaction_data` (JSON), `risk_level`, `is_reviewed`, `reviewed_by` (FK), `review_notes`, `reviewed_at`

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `user()` â†’ `BelongsTo` User
- `trap()` â†’ `BelongsTo` Trap
- `reviewer()` â†’ `BelongsTo` User

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeUnreviewed`, `scopeHighRisk`

---

---

## 17. Trap

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Trap.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…ØµÙŠØ¯Ø© Ø§Ù„Ù†ÙØ³ÙŠØ© (Ø§Ù„ÙØ® Ø§Ù„Ø£Ù…Ù†ÙŠ)
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`name_ar`, `name_en`, `trap_code`, `description_ar`, `description_en`, `risk_weight` (int 1-10), `fake_response_type`, `is_active`

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `interactions()` â†’ `HasMany` TrapInteraction

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„
- `deriveRiskLevel()` â€” ÙŠØ´ØªÙ‚ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø·Ø± Ù…Ù† Ø§Ù„ÙˆØ²Ù†: 1-3=low, 4-6=medium, 7-8=high, 9-10=critical

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeActive`, `scopeByCode($code)`

---

---

## 18. LeaveRequest

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/LeaveRequest.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø·Ù„Ø¨ Ø¥Ø¬Ø§Ø²Ø© Ù…ÙˆØ¸Ù
ğŸŸ¡ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…ØªÙˆØ³Ø·Ø©
**Traits:** SoftDeletes

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`user_id` (FK), `leave_type` (annual/sick/emergency/other), `start_date`, `end_date`, `total_days`, `reason`, `attachment_path`, `status` (pending/approved/rejected), `approved_by` (FK), `approved_at`, `rejection_reason`, `estimated_cost` (decimal)

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `user()` â†’ `BelongsTo` User
- `approver()` â†’ `BelongsTo` User

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„
- `calculateCost()` â€” ÙŠØ­Ø³Ø¨ `estimated_cost = total_days Ã— user->daily_rate`

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopePending`, `scopeApproved`

---

---

## 19. Shift

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Shift.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© (ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©/Ø§Ù„Ù†Ù‡Ø§ÙŠØ©/Ø§Ù„Ø³Ù…Ø§Ø­)
ğŸŸ¡ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…ØªÙˆØ³Ø·Ø© â€” ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© ÙŠØ£Ø«Ø± Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ£Ø®ÙŠØ±

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`name_ar`, `name_en`, `start_time` (time), `end_time` (time), `grace_period_minutes` (int), `is_overnight` (boolean), `is_active` (boolean)

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `assignments()` â†’ `HasMany` UserShift
- `currentlyAssignedUsers()` â†’ `HasMany` UserShift (active + current ÙÙ‚Ø·)

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„
- `getDurationMinutesAttribute()` â€” ÙŠØ­Ø³Ø¨ Ù…Ø¯Ø© Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚ (ÙŠØ¯Ø¹Ù… Ø§Ù„Ù„ÙŠÙ„ÙŠØ©)

---

---

## 20. AuditLog

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/AuditLog.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø³Ø¬Ù„ Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ â€” ÙŠØ³Ø¬Ù„ ÙƒÙ„ Ø¹Ù…Ù„ÙŠØ© ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù/Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‡Ù…Ø©
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ© â€” Ù„Ø§ ÙŠÙØ¹Ø¯Ù„ ÙˆÙ„Ø§ ÙŠÙØ­Ø°Ù Ø£Ø¨Ø¯Ø§Ù‹

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`user_id` (FK), `action` (string), `auditable_type`, `auditable_id` (polymorphic), `old_values` (JSON), `new_values` (JSON), `ip_address`, `user_agent`, `description`

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `user()` â†’ `BelongsTo` User
- `auditable()` â†’ `MorphTo` (Ø£ÙŠ Ù…ÙˆØ¯ÙŠÙ„)

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `record(string $action, ?Model $model, ?array $old, ?array $new, ?string $desc): self` (static)
- **Ø§Ù„ØºØ±Ø¶:** helper Ø«Ø§Ø¨Øª Ù„ØªØ³Ø¬ÙŠÙ„ Ø³Ø¬Ù„ ØªØ¯Ù‚ÙŠÙ‚
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:** ÙŠØ£Ø®Ø° Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ `auth()->user()` ÙˆØ§Ù„Ù€ IP ÙˆØ§Ù„Ù€ User-Agent ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- **ğŸ“Œ Ø§Ø³ØªØ®Ø¯Ø§Ù…:** `AuditLog::record('update', $user, $oldValues, $newValues)`

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeForModel($type, $id)` â€” Ø³Ø¬Ù„Ø§Øª Ù„Ù…ÙˆØ¯ÙŠÙ„ Ù…Ø­Ø¯Ø¯
- `scopeByAction($action)` â€” ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©

---

---

## 21. Holiday

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Holiday.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ© â€” ÙŠÙ…ÙƒÙ† Ø£Ù† ØªÙƒÙˆÙ† Ø¹Ø§Ù…Ø© Ø£Ùˆ Ø®Ø§ØµØ© Ø¨ÙØ±Ø¹
ğŸŸ¢ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…Ù†Ø®ÙØ¶Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`name_ar`, `name_en`, `date` (date), `type` (national/religious/company), `is_recurring` (boolean), `branch_id` (FK â€” nullable = Ø¹Ø§Ù…Ø©)

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `branch()` â†’ `BelongsTo` Branch (nullable)

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `isHoliday(Carbon $date, ?int $branchId): bool` (static)
- **Ø§Ù„ØºØ±Ø¶:** ÙØ­Øµ Ù‡Ù„ ØªØ§Ø±ÙŠØ® Ù…Ø¹ÙŠÙ† Ø¥Ø¬Ø§Ø²Ø©
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:** ÙŠÙØ­Øµ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© (branch_id = null) + Ø¥Ø¬Ø§Ø²Ø§Øª Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ù…Ø­Ø¯Ø¯
- **ğŸ“Œ Ø§Ø³ØªØ®Ø¯Ø§Ù…:** `Holiday::isHoliday(today(), $user->branch_id)`

---

---

## 22. UserShift

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/UserShift.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** **ÙƒÙŠØ§Ù† Ù…Ø³ØªÙ‚Ù„** (Ù„ÙŠØ³ Pivot!) â€” Ø¹Ù‚Ø¯ ØªØ¹ÙŠÙŠÙ† Ù…Ù†Ø§ÙˆØ¨Ø© Ù„Ù…ÙˆØ¸Ù Ø¨ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© ÙˆÙ†Ù‡Ø§ÙŠØ©
ğŸŸ¡ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…ØªÙˆØ³Ø·Ø© â€” ØªØ¹Ø¯ÙŠÙ„ Ø®Ø§Ø·Ø¦ ÙŠÙƒØ³Ø± Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ£Ø®ÙŠØ±

### â­ Ù„Ù…Ø§Ø°Ø§ ÙƒÙŠØ§Ù† Ù…Ø³ØªÙ‚Ù„ØŸ (v3.4)
```
ÙÙŠ v3.3: Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© ÙƒØ§Ù†Øª BelongsToMany (pivot Ø¨Ø³ÙŠØ·)
Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ù…Ø§ Ù†Ù‚Ø¯Ø± Ù†Ø¹Ø±Ù Ù…ÙŠÙ† Ø¹ÙŠÙ‘Ù† Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø©ØŒ ÙˆÙ…ØªÙ‰ØŒ ÙˆÙ„ÙŠØ´
Ø§Ù„Ø­Ù„ v3.4: UserShift Ù…ÙˆØ¯ÙŠÙ„ Ù…Ø³ØªÙ‚Ù„ Ø¨Ø­Ù‚ÙˆÙ„ Ø¥Ø¶Ø§ÙÙŠØ© (assigned_by, reason, effective_from/to)
Ø§Ù„Ù†ØªÙŠØ¬Ø©: ÙƒÙ„ ØªØ¹ÙŠÙŠÙ† Ù…Ø³Ø¬Ù„ ÙˆÙ…Ø¯Ù‚Ù‚
```

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ |
|-------|-------|-------|
| `user_id` | `FKâ†’users` | Ø§Ù„Ù…ÙˆØ¸Ù |
| `shift_id` | `FKâ†’shifts` | Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© |
| `assigned_by` | `FKâ†’users` | Ù…Ù† Ø¹ÙŠÙ‘Ù† Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© |
| `effective_from` | `date` | ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø³Ø±ÙŠØ§Ù† |
| `effective_to` | `date` | ØªØ§Ø±ÙŠØ® Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø³Ø±ÙŠØ§Ù† (nullable = Ù…ÙØªÙˆØ­) |
| `is_current` | `boolean` | Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ø§Ù„ÙŠØŸ |
| `reason` | `string` | Ø³Ø¨Ø¨ Ø§Ù„ØªØ¹ÙŠÙŠÙ†/Ø§Ù„Ù†Ù‚Ù„ |
| `approved_at` | `datetime` | ÙˆÙ‚Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© |
| `approved_by` | `FKâ†’users` | Ù…Ù† ÙˆØ§ÙÙ‚ |

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `user()` â†’ `BelongsTo` User
- `shift()` â†’ `BelongsTo` Shift
- `assignedByUser()` â†’ `BelongsTo` User
- `approvedByUser()` â†’ `BelongsTo` User

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `isValidOn($date): bool`
- **Ø§Ù„ØºØ±Ø¶:** Ù‡Ù„ Ø§Ù„ØªØ¹ÙŠÙŠÙ† ØµØ§Ù„Ø­ ÙÙŠ ØªØ§Ø±ÙŠØ® Ù…Ø¹ÙŠÙ†ØŸ
- **âš™ï¸:** `effective_from <= $date AND (effective_to IS NULL OR effective_to >= $date)`

#### `terminate(?string $reason): void`
- **Ø§Ù„ØºØ±Ø¶:** Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ¹ÙŠÙŠÙ†
- **âš™ï¸:** `effective_to = yesterday, is_current = false`

#### `makeCurrent(): void`
- **Ø§Ù„ØºØ±Ø¶:** ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„ØªØ¹ÙŠÙŠÙ† ÙˆØ¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¨Ù‚ÙŠØ©
- **âš™ï¸:** ÙŠØ¹Ù…Ù„ `update(is_current: false)` Ù„ÙƒÙ„ ØªØ¹ÙŠÙŠÙ†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø«Ù… `is_current = true` Ù„Ù‡Ø°Ø§

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeActive` â€” ØµØ§Ù„Ø­ Ø§Ù„ÙŠÙˆÙ…
- `scopeCurrent` â€” `is_current = true`
- `scopeForUserInPeriod($userId, $start, $end)` â€” ØªØ¹ÙŠÙŠÙ†Ø§Øª ØªØªÙ‚Ø§Ø·Ø¹ Ù…Ø¹ ÙØªØ±Ø©

---

---

## 23. UserBadge

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/UserBadge.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** **ÙƒÙŠØ§Ù† Ù…Ø³ØªÙ‚Ù„** (Ù„ÙŠØ³ Pivot!) â€” Ø³Ø¬Ù„ Ù…Ù†Ø­ Ø´Ø§Ø±Ø© Ù„Ù…ÙˆØ¸Ù Ù…Ø¹ Ø§Ù„Ù…Ø§Ù†Ø­ ÙˆØ§Ù„Ø³Ø¨Ø¨
ğŸŸ¡ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…ØªÙˆØ³Ø·Ø©

### â­ Ù„Ù…Ø§Ø°Ø§ ÙƒÙŠØ§Ù† Ù…Ø³ØªÙ‚Ù„ØŸ (v3.4)
```
Ù†ÙØ³ Ø§Ù„Ø³Ø¨Ø¨ â€” Ù†Ø­ØªØ§Ø¬ awarded_by, awarded_reason, Ø§Ù„Ù†Ù‚Ø§Ø·
```

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`user_id` (FK), `badge_id` (FK), `awarded_at` (datetime), `awarded_reason` (string), `awarded_by` (FKâ†’users)

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `user()` â†’ `BelongsTo` User
- `badge()` â†’ `BelongsTo` Badge
- `awardedByUser()` â†’ `BelongsTo` User

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `award(int $userId, int $badgeId, int $awardedBy, string $reason): self` (static)
- **Ø§Ù„ØºØ±Ø¶:** Ù…Ù†Ø­ Ø´Ø§Ø±Ø© + Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø§Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:**
  1. ÙŠÙ†Ø´Ø¦ UserBadge record
  2. ÙŠØ¬Ù„Ø¨ `points_reward` Ù…Ù† Badge
  3. ÙŠÙ†Ø´Ø¦ `PointsTransaction` (type: earned)
  4. ÙŠØ²ÙŠØ¯ `User->total_points`

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeAwardedBetween($start, $end)`, `scopeForUser($userId)`

---

---

## 24. UserPermission

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/UserPermission.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** ØªØ¬Ø§ÙˆØ² ØµÙ„Ø§Ø­ÙŠØ© Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙØ±Ø¯ (grant Ø£Ùˆ revoke)
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ© â€” ØªØªØ¬Ø§ÙˆØ² ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¯ÙˆØ±!

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`user_id` (FK), `permission_id` (FK), `type` (grant/revoke), `granted_by` (FK), `expires_at` (datetime â€” nullable), `reason`

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `user()` â†’ `BelongsTo` User
- `permission()` â†’ `BelongsTo` Permission
- `grantedByUser()` â†’ `BelongsTo` User

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„
- `isActive()` â€” ÙŠÙØ­Øµ Ù‡Ù„ Ø§Ù„ØªØ¬Ø§ÙˆØ² Ù„Ø§ Ø²Ø§Ù„ ØµØ§Ù„Ø­Ø§Ù‹ (Ù„Ù… ØªÙ†ØªÙ‡ÙŠ ØµÙ„Ø§Ø­ÙŠØªÙ‡)

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeActive` â€” ØºÙŠØ± Ù…Ù†ØªÙ‡ÙŠ
- `scopeGrants` â€” `type = 'grant'`
- `scopeRevocations` â€” `type = 'revoke'`

### ğŸ“Œ Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
```
hasPermission() ÙÙŠ User ÙŠÙØ­Øµ Ø¨Ù‡Ø§Ù„ØªØ±ØªÙŠØ¨:
1. super_admin = true â†’ true Ø¯Ø§Ø¦Ù…Ø§Ù‹
2. UserPermission type=revoke â†’ false (Ø£Ù‚ÙˆÙ‰ Ù…Ù† Ø§Ù„Ø¯ÙˆØ±!)
3. UserPermission type=grant â†’ true (Ø£Ù‚ÙˆÙ‰ Ù…Ù† Ø§Ù„Ø¯ÙˆØ±!)
4. Role->permissions â†’ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø¹Ø§Ø¯ÙŠ
```

---

---

## 25. Payroll

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Payroll.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ù…Ø³ÙŠØ± Ø§Ù„Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ© â€” Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø§Ù„ÙŠØ© Ø­Ø³Ø§Ø³Ø©
**Traits:** SoftDeletes

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ |
|-------|-------|-------|
| `user_id` | `FK` | Ø§Ù„Ù…ÙˆØ¸Ù |
| `branch_id` | `FK` | Ø§Ù„ÙØ±Ø¹ |
| `period` | `string` | Ø§Ù„ÙØªØ±Ø© `YYYY-MM` |
| `basic_salary` | `decimal:2` | Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Ù†Ø³Ø®Ø©) |
| `housing_allowance` | `decimal:2` | Ø¨Ø¯Ù„ Ø§Ù„Ø³ÙƒÙ† (Ù†Ø³Ø®Ø©) |
| `transport_allowance` | `decimal:2` | Ø¨Ø¯Ù„ Ø§Ù„Ù†Ù‚Ù„ (Ù†Ø³Ø®Ø©) |
| `other_allowances` | `decimal:2` | Ø¨Ø¯Ù„Ø§Øª Ø£Ø®Ø±Ù‰ (Ù†Ø³Ø®Ø©) |
| `gross_salary` | `decimal:2` | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø§ØªØ¨ |
| `delay_deductions` | `decimal:2` | Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `early_leave_deductions` | `decimal:2` | Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ù…Ø¨ÙƒØ±Ø© |
| `absence_deductions` | `decimal:2` | Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„ØºÙŠØ§Ø¨ |
| `other_deductions` | `decimal:2` | Ø®ØµÙˆÙ…Ø§Øª Ø£Ø®Ø±Ù‰ |
| `total_deductions` | `decimal:2` | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª |
| `overtime_pay` | `decimal:2` | Ø£Ø¬Ø± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ |
| `bonuses` | `decimal:2` | Ù…ÙƒØ§ÙØ¢Øª |
| `total_additions` | `decimal:2` | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª |
| `net_salary` | `decimal:2` | ØµØ§ÙÙŠ Ø§Ù„Ø±Ø§ØªØ¨ |
| `total_working_days` | `int` | Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù…Ù„ |
| `present_days` | `int` | Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± |
| `absent_days` | `int` | Ø£ÙŠØ§Ù… Ø§Ù„ØºÙŠØ§Ø¨ |
| `late_days` | `int` | Ø£ÙŠØ§Ù… Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `total_delay_minutes` | `int` | Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `total_overtime_minutes` | `int` | Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ |
| `status` | `string` | draft/approved/paid |
| `approved_by` | `FK` | Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ |

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `generateForUser(User $user, string $period): self` (static)
- **Ø§Ù„ØºØ±Ø¶:** ÙŠÙÙˆÙ„Ù‘Ø¯ Ù…Ø³ÙŠØ± Ø±ÙˆØ§ØªØ¨ ÙƒØ§Ù…Ù„ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:**
  1. ÙŠØ£Ø®Ø° Ø§Ù„Ø±Ø§ØªØ¨ ÙˆØ§Ù„Ø¨Ø¯Ù„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© (snapshot)
  2. ÙŠØ¬Ù„Ø¨ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± Ù„Ù„ÙØªØ±Ø©
  3. ÙŠØ­Ø³Ø¨ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª Ù…Ù† `delay_cost + early_leave_cost`
  4. ÙŠØ­Ø³Ø¨ Ø£Ø¬Ø± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ
  5. `net_salary = gross - deductions + additions`
  6. ÙŠØ³ØªØ®Ø¯Ù… `updateOrCreate` Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeForPeriod($period)`, `scopeApproved`, `scopePaid`

---

---

## 26. Setting

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/Setting.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… â€” **Singleton Pattern** (Ø³Ø¬Ù„ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„)
ğŸ”´ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ø¹Ø§Ù„ÙŠØ© â€” ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ |
|-------|-------|-------|
| `app_name` | `string` | Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ø±Ø¨ÙŠ |
| `app_name_en` | `string` | Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ |
| `welcome_title` | `string` | Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªØ±Ø­ÙŠØ¨ |
| `welcome_body` | `text` | Ù†Øµ Ø§Ù„ØªØ±Ø­ÙŠØ¨ |
| `logo_path` | `string` | Ù…Ø³Ø§Ø± Ø§Ù„Ø´Ø¹Ø§Ø± |
| `favicon_path` | `string` | Ù…Ø³Ø§Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© |
| `pwa_name` | `string` | Ø§Ø³Ù… PWA |
| `pwa_short_name` | `string` | Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø®ØªØµØ± |
| `pwa_theme_color` | `string` | Ù„ÙˆÙ† Ø§Ù„Ø«ÙŠÙ… |
| `pwa_background_color` | `string` | Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© |
| `logic_settings` | `JSON` | **Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù†Ø·Ù‚ â€” Ø£Ù‡Ù… Ø­Ù‚Ù„** |

### ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù†Ø·Ù‚ (logic_settings)

```php
DEFAULT_LOGIC_SETTINGS = [
    'loss_multiplier'          => 2.0,   // Ù…Ø¶Ø§Ø¹Ù Ø§Ù„Ø®Ø³Ø§Ø¦Ø±
    'default_geofence_radius'  => 100,   // Ù†ØµÙ Ù‚Ø·Ø± Ø§Ù„Ø³ÙŠØ§Ø¬ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø£Ù…ØªØ§Ø±)
    'default_grace_period'     => 10,    // ÙØªØ±Ø© Ø§Ù„Ø³Ù…Ø§Ø­ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (Ø¯Ù‚Ø§Ø¦Ù‚)
    'overtime_multiplier'      => 1.5,   // Ù…Ø¶Ø§Ø¹Ù Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ
]
```

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `instance(): static` (static â€” Singleton)
- **Ø§Ù„ØºØ±Ø¶:** ÙŠØ±Ø¬Ø¹ Ù†Ø³Ø®Ø© ÙˆØ§Ø­Ø¯Ø© Ù…Ø¹ cache (1 Ø³Ø§Ø¹Ø© TTL)
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:** `Cache::remember('settings', 3600, fn() => static::first())`
- **ğŸ“Œ Ø§Ø³ØªØ®Ø¯Ø§Ù…:** `Setting::instance()->app_name`

#### `freshInstance(): static` (static)
- **Ø§Ù„ØºØ±Ø¶:** Ù†Ø³Ø®Ø© Ø¨Ø¯ÙˆÙ† cache â€” Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ ÙÙ‚Ø·

#### `getLogicSetting(string $key, mixed $default): mixed`
- **Ø§Ù„ØºØ±Ø¶:** ÙŠØ±Ø¬Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù†Ø·Ù‚ÙŠ Ù…Ø¹ fallback

#### `booted()`
- **Ø§Ù„ØºØ±Ø¶:** ÙŠÙ…Ø³Ø­ Ø§Ù„Ù€ cache ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙØ¸ â†’ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ØªØ³Ø±ÙŠ ÙÙˆØ±Ø§Ù‹

---

---

## 27. ReportFormula

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/ReportFormula.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** ØµÙŠØº Ø­Ø³Ø§Ø¨ÙŠØ© Ù…Ø®ØµØµØ© â€” Ù…Ø­Ø±Ùƒ ØµÙŠØº Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
ğŸŸ¡ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…ØªÙˆØ³Ø·Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`name_ar`, `name_en`, `slug`, `formula` (string), `variables` (JSON), `description_ar`, `description_en`, `is_active`, `created_by` (FK)

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `evaluate(array $values): ?float`
- **Ø§Ù„ØºØ±Ø¶:** ÙŠÙ‚ÙŠÙ‘Ù… Ø§Ù„ØµÙŠØºØ© Ø¨Ù‚ÙŠÙ… Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ø¹Ø·Ø§Ø©
- **âš™ï¸ Ø§Ù„Ù…Ù†Ø·Ù‚:** ÙŠØ³ØªØ¨Ø¯Ù„ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø¨Ù‚ÙŠÙ…Ù‡Ø§ØŒ ÙŠÙ†Ø¸Ù Ø§Ù„ØµÙŠØºØ© (ÙŠØ³Ù…Ø­ ÙÙ‚Ø· Ø¨Ù€ `0-9 +âˆ’Ã—Ã· .()`)ØŒ Ø«Ù… ÙŠÙ‚ÙŠÙ‘Ù…Ù‡Ø§
- **âš ï¸:** ÙŠØ³ØªØ®Ø¯Ù… `eval()` â€” Ù„ÙƒÙ† Ù…Ø¹ ØªÙ†Ø¸ÙŠÙ ØµØ§Ø±Ù…

#### `validateFormula(): bool`
- **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ØµÙŠØºØ© Ø¨ØªØ¬Ø±Ø¨ØªÙ‡Ø§ Ù…Ø¹ Ù‚ÙŠÙ… 1.0

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeActive`

---

---

## 28. ScoreAdjustment

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/ScoreAdjustment.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** ØªØ¹Ø¯ÙŠÙ„ ÙŠØ¯ÙˆÙŠ Ù„Ù†Ù‚Ø§Ø· ÙØ±Ø¹/Ù…ÙˆØ¸Ù/Ù‚Ø³Ù…
ğŸŸ¡ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…ØªÙˆØ³Ø·Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`scope` (branch/user/department), `branch_id` (FK), `user_id` (FK), `department_id` (FK), `points_delta` (int), `value_delta` (decimal), `category`, `reason`, `adjusted_by` (FK)

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `branch()`, `user()`, `department()` â€” ÙƒÙ„Ù‡Ø§ `BelongsTo`
- `adjustedByUser()` â†’ `BelongsTo` User

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeForBranch($id)`, `scopeForUser($id)`, `scopePositive`, `scopeNegative`

---

---

## 29. AnalyticsSnapshot

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/AnalyticsSnapshot.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ù„Ù‚Ø·Ø© ØªØ­Ù„ÙŠÙ„Ø§Øª Ø¯ÙˆØ±ÙŠØ© (ÙŠÙˆÙ…ÙŠØ©/Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©/Ø´Ù‡Ø±ÙŠØ©) Ù„ÙƒÙ„ ÙØ±Ø¹
ğŸŸ¡ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…ØªÙˆØ³Ø·Ø© â€” Ø¨ÙŠØ§Ù†Ø§Øª ØªØ­Ù„ÙŠÙ„ÙŠØ© Ù…Ù‡Ù…Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ |
|-------|-------|-------|
| `branch_id` | `FK` | Ø§Ù„ÙØ±Ø¹ |
| `snapshot_date` | `date` | ØªØ§Ø±ÙŠØ® Ø§Ù„Ù„Ù‚Ø·Ø© |
| `period_type` | `string` | daily/weekly/monthly |
| `total_employees` | `int` | Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† |
| `present_count` | `int` | Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ† |
| `absent_count` | `int` | Ø¹Ø¯Ø¯ Ø§Ù„ØºØ§Ø¦Ø¨ÙŠÙ† |
| `late_count` | `int` | Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ£Ø®Ø±ÙŠÙ† |
| `attendance_rate` | `decimal:2` | Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ± |
| `total_delay_minutes` | `int` | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `avg_delay_minutes` | `decimal:2` | Ù…ØªÙˆØ³Ø· Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `total_salary_cost` | `decimal:2` | Ø¥Ø¬Ù…Ø§Ù„ÙŠ ØªÙƒÙ„ÙØ© Ø§Ù„Ø±ÙˆØ§ØªØ¨ |
| `delay_losses` | `decimal:2` | Ø®Ø³Ø§Ø¦Ø± Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `absence_losses` | `decimal:2` | Ø®Ø³Ø§Ø¦Ø± Ø§Ù„ØºÙŠØ§Ø¨ |
| `early_leave_losses` | `decimal:2` | Ø®Ø³Ø§Ø¦Ø± Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ù…Ø¨ÙƒØ±Ø© |
| `total_losses` | `decimal:2` | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®Ø³Ø§Ø¦Ø± |
| `overtime_cost` | `decimal:2` | ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ |
| `vpm` | `decimal:2` | Ø§Ù„Ù‚ÙŠÙ…Ø© Ù„ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© |
| `productivity_gap` | `decimal:2` | ÙØ¬ÙˆØ© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© |
| `loss_ratio` | `decimal:2` | Ù†Ø³Ø¨Ø© Ø§Ù„Ø®Ø³Ø§Ø±Ø© |
| `efficiency_score` | `decimal:2` | Ø¯Ø±Ø¬Ø© Ø§Ù„ÙƒÙØ§Ø¡Ø© |
| `roi_discipline` | `decimal:2` | Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· |
| `hourly_checkin_distribution` | `JSON` | ØªÙˆØ²ÙŠØ¹ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ |
| `daily_pattern_data` | `JSON` | Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ù…Ø· Ø§Ù„ÙŠÙˆÙ…ÙŠ |

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„
- `getLossPercentage()` â€” `(total_losses / total_salary_cost) Ã— 100`
- `isAboveThreshold(5.0)` â€” Ù‡Ù„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø®Ø³Ø§Ø±Ø© ÙÙˆÙ‚ Ø§Ù„Ø­Ø¯ØŸ

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeDaily`, `scopeWeekly`, `scopeMonthly`, `scopeForBranch($id)`, `scopeForDateRange($start, $end)`

---

---

## 30. LossAlert

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/LossAlert.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** ØªÙ†Ø¨ÙŠÙ‡ Ø®Ø³Ø§Ø±Ø© â€” ÙŠÙØ·Ù„Ù‚ Ø¹Ù†Ø¯ ØªØ¬Ø§ÙˆØ² Ø­Ø¯ Ø§Ù„Ø®Ø³Ø§Ø¦Ø±
ğŸŸ¢ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…Ù†Ø®ÙØ¶Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`branch_id` (FK), `triggered_by_user` (FK), `alert_date`, `alert_type`, `severity` (info/warning/critical), `threshold_value`, `actual_value`, `description_ar`, `description_en`, `context_data` (JSON), `is_acknowledged`, `acknowledged_by` (FK), `acknowledged_at`, `resolution_notes`

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `branch()`, `triggeredByUser()`, `acknowledgedByUser()` â€” ÙƒÙ„Ù‡Ø§ `BelongsTo`

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„
- `acknowledge(int $userId, ?string $notes)` â€” ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© "ØªÙ…Øª Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©"
- `getSeverityColor()` / `getSeverityLabel()` â€” Ø£Ù„ÙˆØ§Ù† ÙˆØ£Ø³Ù…Ø§Ø¡ Filament

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeUnacknowledged`, `scopeCritical`, `scopeForBranch($id)`, `scopeRecent($days = 7)`

---

---

## 31. EmployeePattern

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/EmployeePattern.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø£Ù†Ù…Ø§Ø· Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ÙˆØ¸Ù â€” ÙŠÙÙƒØªØ´Ù Ø¨ÙˆØ§Ø³Ø·Ø© AnalyticsService
ğŸŸ¢ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…Ù†Ø®ÙØ¶Ø©

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„
`user_id` (FK), `branch_id` (FK), `pattern_type`, `frequency_score` (decimal), `financial_impact` (decimal), `pattern_data` (JSON), `description_ar`, `description_en`, `risk_level`, `detected_at` (date), `valid_until` (date), `is_active`

### ğŸ”¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ù†Ù…Ø§Ø·
```
frequent_late       â†’ ØªØ£Ø®ÙŠØ± Ù…ØªÙƒØ±Ø±
pre_holiday_absence â†’ ØºÙŠØ§Ø¨ Ù…Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©
monthly_cycle       â†’ Ù†Ù…Ø· Ø´Ù‡Ø±ÙŠ
burnout_risk        â†’ Ø®Ø·Ø± Ø¥Ø±Ù‡Ø§Ù‚
improving           â†’ ØªØ­Ø³Ù‘Ù† Ù…Ù„Ø­ÙˆØ¸
declining           â†’ ØªØ±Ø§Ø¬Ø¹ Ù…Ø³ØªÙ…Ø±
```

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `user()`, `branch()` â†’ `BelongsTo`

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„
- `patternTypes()` (static) â€” Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ
- `getPatternLabel()` â€” Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ù„Ù‡Ø§Ù„Ù†Ù…Ø·
- `getRiskColor()` â€” Ø§Ù„Ù„ÙˆÙ† ÙÙŠ Filament

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeActive`, `scopeHighRisk`, `scopeForUser($id)`, `scopeByType($type)`

---

---

## 32. AttendanceException

ğŸ“ **Ø§Ù„Ù…Ù„Ù:** `app/Models/AttendanceException.php`
ğŸ“‹ **Ø§Ù„ØºØ±Ø¶:** Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø­Ø¶ÙˆØ± â€” Ø³Ø§Ø¹Ø§Øª Ù…Ø±Ù†Ø©ØŒ Ø¹Ù…Ù„ Ø¹Ù† Ø¨Ø¹Ø¯ØŒ ØªØ¬Ø§ÙˆØ² Ø³ÙŠØ§Ø¬
ğŸŸ¡ **Ø§Ù„Ø®Ø·ÙˆØ±Ø©:** Ù…ØªÙˆØ³Ø·Ø© â€” ÙŠØ£Ø«Ø± Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ£Ø®ÙŠØ±

### ğŸ”¹ Ø§Ù„Ø­Ù‚ÙˆÙ„

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ØºØ±Ø¶ |
|-------|-------|-------|
| `user_id` | `FKâ†’users` | Ø§Ù„Ù…ÙˆØ¸Ù |
| `exception_type` | `string` | Ù†ÙˆØ¹ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡ (flexible_hours, remote_work, bypass_geofence) |
| `custom_shift_start` | `time` | ÙˆÙ‚Øª Ø¨Ø¯Ø§ÙŠØ© Ù…Ø®ØµØµ |
| `custom_shift_end` | `time` | ÙˆÙ‚Øª Ù†Ù‡Ø§ÙŠØ© Ù…Ø®ØµØµ |
| `custom_grace_minutes` | `int` | ÙØªØ±Ø© Ø³Ù…Ø§Ø­ Ù…Ø®ØµØµØ© |
| `bypass_geofence` | `boolean` | ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø³ÙŠØ§Ø¬ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ |
| `bypass_late_flag` | `boolean` | ØªØ¬Ø§ÙˆØ² Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ£Ø®ÙŠØ± |
| `start_date` | `date` | Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡ |
| `end_date` | `date` | Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡ (nullable = Ø¯Ø§Ø¦Ù…) |
| `reason` | `string` | Ø§Ù„Ø³Ø¨Ø¨ |
| `approved_by` | `FKâ†’users` | Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ |
| `is_active` | `boolean` | ÙØ¹Ø§Ù„ØŸ |

### ğŸ”¹ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- `user()` â†’ `BelongsTo` User
- `approvedByUser()` â†’ `BelongsTo` User

### ğŸ”¹ Ø§Ù„Ø¯ÙˆØ§Ù„

#### `getActiveForUser(int $userId): ?self` (static)
- **Ø§Ù„ØºØ±Ø¶:** ÙŠØ±Ø¬Ø¹ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø´Ø· Ù„Ù„Ù…ÙˆØ¸Ù Ø§Ù„ÙŠÙˆÙ…
- **âš™ï¸:** ÙÙ„ØªØ±Ø© Ø¨Ù€ `activeToday` scope + `user_id`

#### `isValidToday(): bool`
- **Ø§Ù„ØºØ±Ø¶:** Ù‡Ù„ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡ ÙŠØºØ·ÙŠ Ø§Ù„ÙŠÙˆÙ…ØŸ

#### `getEffectiveShiftStart(): ?string`
- **Ø§Ù„ØºØ±Ø¶:** ÙŠØ±Ø¬Ø¹ ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø®ØµØµ Ø£Ùˆ null Ù„Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ

#### `getEffectiveGracePeriod(): ?int`
- **Ø§Ù„ØºØ±Ø¶:** ÙŠØ±Ø¬Ø¹ ÙØªØ±Ø© Ø§Ù„Ø³Ù…Ø§Ø­ Ø§Ù„Ù…Ø®ØµØµØ© Ø£Ùˆ null Ù„Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ

### ğŸ”¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
- `scopeActiveToday` â€” ÙØ¹Ø§Ù„ ÙˆÙŠØºØ·ÙŠ Ø§Ù„ÙŠÙˆÙ…
- `scopeForUser($userId)`

### ğŸ“Œ ÙƒÙŠÙ ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ AttendanceService
```
Ø¹Ù†Ø¯ check-in:
1. ÙŠÙØ­Øµ getActiveForUser($userId)
2. Ù„Ùˆ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³ØªØ«Ù†Ø§Ø¡ bypass_geofence â†’ ÙŠØªØ¬Ø§ÙˆØ² ÙØ­Øµ GPS
3. Ù„Ùˆ Ù…ÙˆØ¬ÙˆØ¯ custom_shift_start â†’ ÙŠØ³ØªØ®Ø¯Ù…Ù‡ Ø¨Ø¯Ù„ Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©
4. Ù„Ùˆ Ù…ÙˆØ¬ÙˆØ¯ custom_grace_minutes â†’ ÙŠØ³ØªØ®Ø¯Ù…Ù‡ Ø¨Ø¯Ù„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
```

---

---

## ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„Ø¹Ø¯Ø¯ |
|---------|-------|
| Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª | 32 |
| Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª | ~120 |
| Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª (Scopes) | ~80 |
| Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø®ØµØµØ© | ~70 |
| Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø¨Ù€ SoftDeletes | 5 (User, Message, Circular, LeaveRequest, Payroll) |
| Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø¨Ù€ Polymorphic | 2 (PointsTransaction, AuditLog) |
| ÙƒÙŠØ§Ù†Ø§Øª Ù…Ø³ØªÙ‚Ù„Ø© (v3.4) | 2 (UserShift, UserBadge) |
| Ù…ÙˆØ¯ÙŠÙ„ Singleton | 1 (Setting) |

---

> **ØµØ±Ø­ Ø§Ù„Ø¥ØªÙ‚Ø§Ù† v3.4.1** â€” *"ÙƒÙ„ Ù…ÙˆØ¯ÙŠÙ„ Ù…ÙˆØ«Ù‚. ÙƒÙ„ Ø­Ù‚Ù„ Ù…Ø´Ø±ÙˆØ­. ÙƒÙ„ Ø¯Ø§Ù„Ø© Ù…ÙÙ‡ÙˆÙ…Ø©."*
